(this.webpackJsonpinternship_frontend=this.webpackJsonpinternship_frontend||[]).push([[0],{104:function(e){e.exports=JSON.parse("{}")},123:function(e,t,r){},124:function(e,t,r){},125:function(e,t,r){},150:function(e,t,r){},231:function(e,t,r){},232:function(e,t,r){},234:function(e,t,r){},235:function(e,t,r){},236:function(e,t,r){},238:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(26),s=r.n(c),i=(r(123),r(124),r(13)),o=(r(125),r(108)),l=r(7),u=r.n(l),j=r(10),d=r(27),b=Object(d.b)({name:"user",initialState:{user:{},isLoading:!1,error:""},reducers:{getUserPending:function(e){e.isLoading=!0},getUserSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.user=r,e.error=""},getUserFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r}}}),h=b.actions,x=h.getUserPending,p=h.getUserSuccess,O=h.getUserFail,m=b.reducer,f=r(23),g=r.n(f),v="https://devagileicrm.herokuapp.com/v1/",k=v+"user",y=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post(k,e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},w=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.patch("https://devagileicrm.herokuapp.com/v1/user/verify",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({status:"error",message:t.t0.error});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},S=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("https://devagileicrm.herokuapp.com/v1/user/login",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&(sessionStorage.setItem("accessJWT",n.data.accessJWT),localStorage.setItem("crmSite",JSON.stringify({refreshJWT:n.data.refreshJWT}))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},L=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("https://devagileicrm.herokuapp.com/v1/user/logout",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),T=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(x()),e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=sessionStorage.getItem("accessJWT"))||r("Token not found!"),e.next=5,g.a.get(k,{headers:{Authorization:a}});case 5:n=e.sent,t(n.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:if(!(r=e.sent).user||!r.user._id){e.next=7;break}return e.abrupt("return",t(p(r.user)));case 7:t(O("User is not found")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(O(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},N=r(16),C=r(243),P=r(244),A=r(105),I=r(248),E=r(246),M=r(107),F=r(245),J=Object(d.b)({name:"login",initialState:{isLoading:!1,isAuth:!1,error:""},reducers:{loginPending:function(e){e.isLoading=!0},loginSuccess:function(e){e.isLoading=!1,e.isAuth=!0,e.error=""},loginFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r}}}),D=J.reducer,q=J.actions,z=q.loginPending,W=q.loginSuccess,R=q.loginFail,G=D,_=r(8),B=r(1),U=function(e){var t=e.frmSwitcher,r=Object(_.b)(),n=Object(N.k)(),c=(Object(N.l)(),Object(_.c)((function(e){return e.login}))),s=c.isLoading,o=c.error;Object(a.useEffect)((function(){sessionStorage.getItem("accessJWT")&&n.push("/dashboard")}),[n]);var l=Object(a.useState)("fakeemail@email.com"),d=Object(i.a)(l,2),b=d[0],h=d[1],x=Object(a.useState)("sfsd#3Dsga"),p=Object(i.a)(x,2),O=p[0],m=p[1],f=function(e){var t=e.target,r=t.name,a=t.value;switch(r){case"email":h(a);break;case"password":m(a)}console.log(r,a)},g=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b&&O||alert("Veuillez remplir les champs"),r(z()),e.prev=3,e.next=6,S({email:b,password:O});case 6:if("error"!==(a=e.sent).status){e.next=9;break}return e.abrupt("return",r(R(a.message)));case 9:r(W()),r(T()),n.push("/dashboard"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r(R(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(C.a,{children:[Object(B.jsx)(P.a,{children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)("h1",{className:"text-info text-center",children:"Se Connecter"}),Object(B.jsx)("hr",{}),o&&Object(B.jsx)(I.a,{variant:"danger",children:o}),Object(B.jsxs)(E.a,{autoComplete:"off",onSubmit:g,children:[Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Addresse Email"}),Object(B.jsx)(E.a.Control,{type:"email",name:"email",onChange:f,value:b,placeholder:"Entrez votre addresse email",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Mot de passe"}),Object(B.jsx)(E.a.Control,{type:"password",name:"password",onChange:f,value:O,placeholder:"Mot de passe",required:!0})]}),Object(B.jsx)(M.a,{type:"submit",children:"Se connecter"}),s&&Object(B.jsx)(F.a,{variant:"primary",animation:"border"})]}),Object(B.jsx)("hr",{})]})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)("a",{href:"#!",onClick:function(){return t("reset")},children:"Mot de passe oubli\xe9 ?"})})}),Object(B.jsx)(P.a,{className:"py-4",children:Object(B.jsx)(A.a,{children:Object(B.jsx)("a",{href:"/registration",children:"Cr\xe9er un compte"})})})]})},H=function(e){var t=e.handleOnChange,r=e.handleOnResetSubmit,a=e.email,n=e.frmSwitcher;return Object(B.jsxs)(C.a,{children:[Object(B.jsx)(P.a,{children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)("h1",{className:"text-info text-center",children:"R\xe9initialiser le mot de passe"}),Object(B.jsx)("hr",{}),Object(B.jsxs)(E.a,{autoComplete:"off",onSubmit:r,children:[Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Addresse Email"}),Object(B.jsx)(E.a.Control,{type:"email",name:"email",onChange:t,value:a,placeholder:"Entrez votre addresse email",required:!0})]}),Object(B.jsx)(M.a,{type:"submit",children:"Envoyer le code"})]}),Object(B.jsx)("hr",{})]})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)("a",{href:"#!",onClick:function(){return n("login")},children:"Se Connecter ?"})})})]})},K=function(){var e=Object(a.useState)("login"),t=Object(i.a)(e,2),r=t[0],n=t[1],c=function(e){n(e)};return Object(B.jsx)("div",{className:"entry-page bg-info",children:Object(B.jsxs)(o.a,{className:"form-box",children:["login"===r&&Object(B.jsx)(U,{frmSwitcher:c}),"reset"===r&&Object(B.jsx)(H,{handleOnResetSubmit:function(e){e.preventDefault()},frmSwitcher:c})]})})},V=function(){return Object(B.jsx)("div",{className:"text-center copy-right",children:"\xa9 iCRM all right reserved -2021"})},$=r(249),Y=r(247),Z=r.p+"static/media/dev.ed29adee.png",Q=(r(150),r(51)),X=function(){var e=Object(N.k)(),t=Object(_.c)((function(e){return e.user})).user;return Object(B.jsxs)($.a,{collapseOnSelect:!0,bg:"",variant:"dark",expand:"md",children:[Object(B.jsx)($.a.Brand,{children:Object(B.jsx)("img",{src:Z,alt:"logo",width:"65px"})}),Object(B.jsxs)("h3",{style:{"text-shadow":"0 0 4px #fff, 0 0 11px #fff, 0 0 19px #fff, 0 0 40px orangered, 0 0 80px orangered, 0 0 90px orangered, 0 0 100px orangered, 0 0 150px orangered"},children:["Bienvenue ",t.name]}),Object(B.jsx)($.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(B.jsx)($.a.Collapse,{id:"basic-navbar-nav",children:Object(B.jsxs)(Y.a,{className:"ml-auto",children:[Object(B.jsx)(Q.LinkContainer,{to:"/dashboard",children:Object(B.jsx)(Y.a.Link,{children:Object(B.jsx)(M.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"L'interface"})})}),Object(B.jsx)(Q.LinkContainer,{to:"/tickets",children:Object(B.jsx)(Y.a.Link,{children:Object(B.jsx)(M.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Les tickets"})})}),Object(B.jsx)(Y.a.Link,{onClick:function(){sessionStorage.removeItem("accessJWT"),localStorage.removeItem("crmSite"),L(),e.push("/")},children:Object(B.jsx)(M.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Se Deconnecter"})})]})})]})},ee=function(e){var t=e.children;return Object(B.jsxs)("div",{className:"default-layout",children:[Object(B.jsx)("div",{className:"header",children:Object(B.jsx)(X,{})}),Object(B.jsx)("main",{className:"main",children:t}),Object(B.jsx)("footer",{className:"footer",children:Object(B.jsx)(V,{})})]})},te=Object(d.b)({name:"ticketList",initialState:{tickets:[],isLoading:!1,error:"",searchTicketList:[],selectedTicket:{},replyMsg:""},reducers:{fetchTicketLoading:function(e,t){e.isLoading=!0},fetchTicketSuccess:function(e,t){e.tickets=t.payload,e.searchTicketList=t.payload,e.isLoading=!1},fetchTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},searchTickets:function(e,t){var r=t.payload;e.searchTicketList=e.tickets.filter((function(e){return r?e.subject.toLowerCase().includes(r.toLowerCase()):e}))},fetchSingleTicketLoading:function(e){e.isLoading=!0},fetchSingleTicketSuccess:function(e,t){var r=t.payload;e.selectedTicket=r,e.isLoading=!1,e.error=""},fetchSingleTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},replyTicketLoading:function(e){e.isLoading=!0},replyTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.error="",e.replyMsg=r},replyTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.replyTicketError=r},closeTicketLoading:function(e){e.isLoading=!0},closeTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.error="",e.replyMsg=r},closeTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},resetResponseMsg:function(e){e.isLoading=!1,e.replyTicketError="",e.replyMsg=""}}}),re=te.reducer,ae=te.actions,ne=ae.fetchTicketLoading,ce=ae.fetchTicketSuccess,se=ae.fetchTicketFail,ie=ae.searchTickets,oe=ae.fetchSingleTicketLoading,le=ae.fetchSingleTicketSuccess,ue=ae.fetchSingleTicketFail,je=ae.replyTicketLoading,de=ae.replyTicketSuccess,be=ae.replyTicketFail,he=ae.closeTicketLoading,xe=ae.closeTicketSuccess,pe=ae.closeTicketFail,Oe=ae.resetResponseMsg,me=re,fe="https://devagileicrm.herokuapp.com/v1/",ge=fe+"ticket/",ve=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get(ge+e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},ke=function(e,t){return new Promise(function(){var r=Object(j.a)(u.a.mark((function r(a,n){var c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g.a.put(ge+e,t,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:c=r.sent,a(c.data),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0.message),n(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())},ye=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.patch("https://devagileicrm.herokuapp.com/v1/ticket/close-ticket/"+e,{},{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},we=function(e){return console.log("FROM THE API",e),new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post(ge,e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},Se=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ne()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://devagileicrm.herokuapp.com/v1/ticket",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(ce(r.data.result)),r.data.result||t(se({message:"error couldn't load"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(se(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Le=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(oe()),t.prev=1,t.next=4,ve(e);case 4:a=t.sent,r(le(a.data.result.length&&a.data.result[0])),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(ue(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Te=r(109),Ne=r(19),Ce=r(112),Pe=r.n(Ce),Ae=r(113),Ie=r.n(Ae),Ee=function(){var e=Object(_.b)(),t=Object(_.c)((function(e){return e.tickets})),r=t.searchTicketList,n=t.isLoading,c=t.error;Object(a.useEffect)((function(){e(Se())}),[e]);var s=r;if(n)return Object(B.jsxs)("div",{children:[Object(B.jsx)(Te.WindMillLoading,{}),Object(B.jsx)("h3",{style:{"text-align":"center","margin-top":"150px",color:"cyan"},children:"Loading..."})]});if(c)return Object(B.jsx)("h3",{children:c});var i=[{dataField:"_id",text:"Identifiant du ticket"},{dataField:"subject",text:"Sujet",formatter:function(e,t,r,a){return Object(B.jsx)(Ne.Link,{to:"/ticket/".concat(t._id),children:t.subject})}},{dataField:"status",text:"Status"},{dataField:"priority",text:"Priorit\xe9",style:function(e,t,r,a){return"Elev\xe9e"===e?{backgroundColor:"red"}:"Moyenne"===e?{backgroundColor:"orange"}:{backgroundColor:"green"}}},{dataField:"openAt",text:"Date d'ouverture"}];return Object(B.jsx)(C.a,{children:Object(B.jsx)(Ie.a,{classes:"table table-striped table-dark",hover:!0,keyField:"id",data:s,columns:i,responsive:!0,pagination:Pe()()})})},Me=(r(231),r(250)),Fe=function(e){var t=e.page;return Object(B.jsxs)(Me.a,{children:[Object(B.jsx)(Q.LinkContainer,{to:"/dashboard",children:Object(B.jsx)(Me.a.Item,{children:"Home"})}),Object(B.jsx)(Me.a.Item,{active:!0,children:t})]})},Je=function(){var e=Object(_.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];Object(a.useEffect)((function(){e(Se())}),[n,e]);var c=Object(_.c)((function(e){return e.tickets})).tickets,s=c.filter((function(e){return"Fermer"!==e.status})),o=c.length;return Object(B.jsxs)(C.a,{children:[Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(Fe,{page:"Dashboard"})})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{className:"text-center mt-5 mb-2",children:Object(B.jsx)(Ne.Link,{to:"/add-ticket",children:Object(B.jsx)(M.a,{className:"HeaderBTN",variant:"success",style:{"font-size":"2rem","border-radius":"2rem"},children:"Ajouter un Ticket"})})})}),Object(B.jsx)(P.a,{children:Object(B.jsxs)(A.a,{className:"text-center mb-2",children:[Object(B.jsx)("div",{children:Object(B.jsxs)("h2",{children:["Total des tickets: ",o]})}),Object(B.jsx)("div",{children:Object(B.jsxs)("h2",{children:["Mes tickets en attente: ",s.length]})})]})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{className:"text-center mb-2",style:{"font-size":"1.5rem"},children:"Ticket Ajout\xe9 recently"})}),Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{className:"recent-ticket",children:Object(B.jsx)(Ee,{})})})]})},De=r(35),qe=r(17),ze=r(79),We=r(34),Re=(r(232),Object(d.b)({name:"newTicket",initialState:{isLoading:!1,error:"",successMsg:""},reducers:{openNewTicketPending:function(e){e.isLoading=!0},openNewTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.successMsg=r},openNewTicketFail:function(e,t){var r=t.payload;e.isLoading=!0,e.error=r},restSuccessMSg:function(e){e.isLoading=!0,e.successMsg=""}}})),Ge=Re.actions,_e=Ge.openNewTicketPending,Be=Ge.openNewTicketSuccess,Ue=Ge.openNewTicketFail,He=Ge.restSuccessMSg,Ke=Re.reducer,Ve=function(e){return function(t){return new Promise(function(){var r=Object(j.a)(u.a.mark((function r(a,n){var c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(_e()),r.next=4,we(e);case 4:if("error"!==(c=r.sent).status){r.next=7;break}return r.abrupt("return",t(Ue(c.message)));case 7:t(Be("Ticket Envoy\xe9 avec success")),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),t(Ue(r.t0.message));case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}())}},$e={subject:"",issueDate:"",message:""},Ye={subject:!1,issueDate:!1,message:!1},Ze=function(){var e=Object(a.useState)($e),t=Object(i.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(Ye),s=Object(i.a)(c,2),l=s[0],d=s[1],b=Object(a.useState)("Selectioner"),h=Object(i.a)(b,2),x=h[0],p=h[1],O=Object(a.useState)("Selectioner"),m=Object(i.a)(O,2),f=m[0],g=m[1],v=Object(_.b)();Object(a.useEffect)((function(){S&&v(He())}),[v,r,l]);var k=Object(_.c)((function(e){return e.openTicket})),y=k.isLoading,w=k.error,S=k.successMsg,L=Object(_.c)((function(e){return e.user})).user.name,T=function(e){var t=e.target,a=t.name,c=t.value;n(Object(qe.a)(Object(qe.a)({},r),{},Object(De.a)({},a,c))),console.log(a,c)},N=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(Ye),e.next=4,(n=r.subject)>=3&&n<=100;case 4:a=e.sent,d(Object(qe.a)(Object(qe.a)({},Ye),{},{subject:!a})),v(Ve(Object(qe.a)(Object(qe.a)({},r),{},{sender:L,priority:x,speciality:f})));case 7:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(o.a,{style:{background:"none"},className:"mt-3 add-new-ticket",children:[Object(B.jsx)("h1",{className:"text-center",children:"Ajouter un Nouveau Ticket"}),Object(B.jsx)("hr",{style:{backgroundColor:"orangered"}}),Object(B.jsxs)("div",{children:[w&&Object(B.jsx)(I.a,{variant:"danger",children:w}),S&&Object(B.jsx)(I.a,{variant:"primary",children:S}),y&&Object(B.jsx)(F.a,{variant:"primary",animation:"border"})]}),Object(B.jsxs)(E.a,{autoComplete:"off",onSubmit:N,children:[Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Sujet"}),Object(B.jsx)(E.a.Control,{name:"subject",value:r.subject,onChange:T,minLength:"3",maxLength:"50",placeholder:"Entrez le sujet de votre reclamation",required:!0}),Object(B.jsx)(E.a.Text,{className:"text-danger"})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Date de l'incident"}),Object(B.jsx)(E.a.Control,{type:"date",name:"issueDate",placeholder:"jj-mm-aaaa",value:r.issueDate,onChange:T,required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Les details"}),Object(B.jsx)(E.a.Control,{as:"textarea",name:"message",value:r.message,onChange:T,placeholder:"Decrivez votre Probl\xe8me ",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Priorit\xe9"}),Object(B.jsxs)(ze.a,{alignRight:!0,title:x,value:x,id:"dropdown-menu-align-right",onSelect:function(e){console.log(e),p(e)},required:!0,children:[Object(B.jsx)(We.a.Item,{style:{backgroundColor:"red"},eventKey:"Elev\xe9e",children:"Elev\xe9e"}),Object(B.jsx)(We.a.Item,{style:{backgroundColor:"orange"},eventKey:"Moyenne",children:"Moyenne"}),Object(B.jsx)(We.a.Item,{style:{backgroundColor:"green"},eventKey:"Basse",children:"Basse"})]})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Type:"}),Object(B.jsxs)(ze.a,{alignRight:!0,title:f,value:f,id:"dropdown-menu-align-right",onSelect:function(e){console.log(e),g(e)},required:!0,children:[Object(B.jsx)(We.a.Item,{eventKey:"Pedagogique",children:"Pedagogique"}),Object(B.jsx)(We.a.Item,{eventKey:"Technique",children:"Technique"}),Object(B.jsx)(We.a.Item,{eventKey:"R\xe9seau",children:"R\xe9seau"})]})]}),Object(B.jsx)(M.a,{type:"submit",variant:"info",children:"Envoyer"})]})]})},Qe={subject:"",issueDate:"",detail:""},Xe=function(){var e=Object(a.useState)(Qe),t=Object(i.a)(e,2);t[0],t[1];return Object(B.jsxs)(C.a,{children:[Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(Fe,{page:"New Ticket"})})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(Ze,{})})})]})},et=function(){var e=Object(_.b)();return Object(B.jsx)("div",{children:Object(B.jsx)(E.a,{children:Object(B.jsxs)(E.a.Group,{as:P.a,children:[Object(B.jsx)(E.a.Label,{column:!0,sm:"3",style:{color:"white",boxShadow:"0px 3px 9px black"},children:"Rechercher:"}),Object(B.jsx)(A.a,{sm:"9",children:Object(B.jsx)(E.a.Control,{name:"searchStr",onChange:function(t){var r,a=t.target.value;e((r=a,function(e){e(ie(r))})),console.log(a)},placeholder:"Rechercher ..."})})]})})})},tt=(r(104),function(){var e=Object(_.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];return Object(a.useEffect)((function(){e(Se())}),[n,e]),Object(B.jsxs)(C.a,{children:[Object(B.jsx)(P.a,{children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)("hr",{}),Object(B.jsx)(Fe,{page:"Ticket Lists"})]})}),Object(B.jsxs)(P.a,{className:"mt-4",children:[Object(B.jsx)(A.a,{children:Object(B.jsx)(Ne.Link,{to:"/add-ticket",children:Object(B.jsx)(M.a,{variant:"info",children:"Ajouter un nouveau Ticket"})})}),Object(B.jsx)(A.a,{className:"text-right",children:Object(B.jsx)(et,{})})]}),Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(Ee,{})})})]})}),rt=(r(234),function(e){var t=e.msg,r=Object(_.b)();Object(a.useEffect)((function(){r(T())}),[r]);var n=Object(_.c)((function(e){return e.user})).user;return console.log(t),t?t.map((function(e,t){return Object(B.jsxs)("div",{style:{"flex-direction":e.sender==n.name?"row":"row-reverse",color:e.sender==n.name?"black":"blue"},className:"message-history mt-3",children:[Object(B.jsxs)("div",{className:"send font-weight-bold text-secondary",style:{"box-shadow":" 0px 0px 30px orangered","border-radius":"1rem",padding:"1rem","flex-direction":e.sender==n.name?"row":"row-reverse"},children:[Object(B.jsx)("div",{className:"sender",children:e.sender}),Object(B.jsx)("div",{className:"date",children:e.msgAt&&new Date(e.msgAt).toLocaleString()})]}),Object(B.jsxs)("div",{className:"message",children:[" ",e.message]})]},t)})):null}),at=function(e){var t=e._id,r=Object(_.b)(),n=Object(_.c)((function(e){return e.user})).user.name,c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(B.jsxs)(E.a,{onSubmit:function(e){e.preventDefault();var a={message:o,sender:n};console.log(a),r(function(e,t){return function(){var r=Object(j.a)(u.a.mark((function r(a){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(je()),r.prev=1,r.next=4,ke(e,t);case 4:if(n=r.sent,console.log(n),"error"!==n.status){r.next=8;break}return r.abrupt("return",a(be(n.message)));case 8:a(Le(e)),a(de("Message envoy\xe9e avec succes")),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),console.log(r.t0.message),a(be(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}()}(t,a)),l("")},children:[Object(B.jsx)(E.a.Label,{children:"Reply"}),Object(B.jsx)(E.a.Text,{children:Object(B.jsx)("h4",{children:"Veuillez repondre \xe0 notre support ici"})}),Object(B.jsx)(E.a.Control,{value:o,onChange:function(e){l(e.target.value)},as:"textarea",rows:3,name:"detail"}),Object(B.jsx)("div",{className:"text-right mt-4",children:Object(B.jsx)(M.a,{variant:"info",type:"submit",children:"Repondre"})})]})},nt=function(){var e=Object(N.m)().tId,t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0],c=(r[1],Object(a.useState)("")),s=Object(i.a)(c,2),o=(s[0],s[1],Object(_.c)((function(e){return e.tickets}))),l=o.isLoading,d=o.error,b=o.selectedTicket,h=o.replyMsg,x=o.replyTicketError,p=Object(_.b)();Object(a.useEffect)((function(){return p(Le(e)),function(){(h||x)&&p(Oe())}}),[n,e,p,h,x]);return Object(B.jsxs)(B.Fragment,{children:[" ",Object(B.jsx)(X,{}),Object(B.jsxs)(C.a,{children:[Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(Fe,{page:"Ticket"})})}),Object(B.jsx)(P.a,{children:Object(B.jsxs)(A.a,{children:[l&&Object(B.jsx)(F.a,{variant:"primary",animation:"border"}),d&&Object(B.jsx)(I.a,{variant:"danger",children:d}),x&&Object(B.jsx)(I.a,{variant:"danger",children:x}),h&&Object(B.jsx)(I.a,{variant:"success",children:h})]})}),Object(B.jsxs)(P.a,{children:[e,Object(B.jsxs)(A.a,{children:[Object(B.jsxs)("div",{className:"subject",children:["Sujet: ",b.subject]}),Object(B.jsxs)("div",{className:"date",children:["Date de reclammation:"," ",b.openAt&&new Date(b.openAt).toLocaleString()]}),Object(B.jsxs)("div",{className:"status",children:["Status: ",b.status]}),Object(B.jsxs)("div",{className:"priority",children:["Priorite ",b.priority]})]}),Object(B.jsx)(A.a,{className:"text-right",children:Object(B.jsx)(M.a,{variant:"outline-info",onClick:function(){return p((t=e,function(){var e=Object(j.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(he()),e.prev=1,e.next=4,ye(t);case 4:if("error"!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",r(pe(a.message)));case 7:r(Le(t)),r(xe("Ce ticket est ferm\xe9")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message),r(pe(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()));var t},disabled:"Fermer"===b.status,children:"Fermer le ticket"})})]}),Object(B.jsx)(P.a,{className:"mt-4",children:Object(B.jsx)(A.a,{children:b.conversations&&Object(B.jsx)(rt,{msg:b.conversations})})}),Object(B.jsx)("hr",{style:{backgroundColor:"orange"}}),Object(B.jsx)(P.a,{className:"mt-4",children:Object(B.jsx)(A.a,{children:Object(B.jsx)(at,{_id:e})})})]})," "]})},ct=r(115),st=["children"],it=function(e){var t=e.children,r=Object(ct.a)(e,st),n=Object(_.b)(),c=Object(_.c)((function(e){return e.login})).isAuth,s=Object(_.c)((function(e){return e.user})).user;return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.parse(localStorage.getItem("crmSite")),(n=a.refreshJWT)||r("Token not found!"),e.next=5,g.a.get("https://devagileicrm.herokuapp.com/v1/tokens",{headers:{Authorization:n}});case 5:"success"===(c=e.sent).data.status&&sessionStorage.setItem("accessJWT",c.data.accessJWT),t(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),"Request failed with status code 403"===e.t0.message&&localStorage.removeItem("crmSite"),r(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:e.sent&&n(W());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!s._id&&n(T()),!sessionStorage.getItem("accessJWT")&&localStorage.getItem("crmSite")&&e(),!c&&sessionStorage.getItem("accessJWT")&&n(W())}),[n,c,s._id]),Object(B.jsx)(N.d,Object(qe.a)(Object(qe.a)({},r),{},{render:function(e){var r=e.location;return c?Object(B.jsx)(ee,{children:t}):Object(B.jsx)(N.c,{to:{pathname:"/",state:{from:r}}})}}))},ot=Object(d.b)({name:"userRegistration",initialState:{isLoading:!1,status:"",message:""},reducers:{registrationPending:function(e){e.isLoading=!0},registrationSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.status="success",e.message=r},registrationError:function(e,t){var r=t.payload;e.isLoading=!1,e.status="error",e.message=r}}}),lt=ot.reducer,ut=ot.actions,jt=ut.registrationPending,dt=ut.registrationSuccess,bt=ut.registrationError,ht=lt,xt={name:"Driss Jaidi",phone:"0611111111",email:"fakeemail@email.com",company:"Mac Code",address:"Texas",password:"sfsd#3Dsg",confirmPass:"sfsd#3Dsg"},pt={isLenthy:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpclChr:!1,confirmPass:!1},Ot=function(){var e=Object(_.b)(),t=Object(a.useState)(xt),r=Object(i.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(pt),o=Object(i.a)(s,2),l=o[0],d=o[1],b=Object(_.c)((function(e){return e.registration})),h=b.isLoading,x=b.status,p=b.message;Object(a.useEffect)((function(){}),[n]);var O=function(e){var t=e.target,r=t.name,a=t.value;if(c(Object(qe.a)(Object(qe.a)({},n),{},Object(De.a)({},r,a))),"password"===r){var s=a.length>8,i=/[A-Z]/.test(a),o=/[a-z]/.test(a),u=/[0-9]/.test(a),j=/[@,#,$,%,&]/.test(a);d(Object(qe.a)(Object(qe.a)({},l),{},{isLenthy:s,hasUpper:i,hasLower:o,hasNumber:u,hasSpclChr:j}))}"confirmPass"===r&&d(Object(qe.a)(Object(qe.a)({},l),{},{confirmPass:n.password===a}))};return Object(B.jsxs)(C.a,{children:[Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)("h1",{className:"text-info",children:"Cre\xe9r un compte"})})}),Object(B.jsx)("hr",{}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:p&&Object(B.jsx)(I.a,{variant:"success"===x?"success":"danger",children:p})})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(A.a,{children:Object(B.jsxs)(E.a,{onSubmit:function(t){t.preventDefault();var r,a=n.name,c=n.phone,s=n.email,i=n.company,o=n.address,l=n.password;e((r={name:a,phone:c,email:s,company:i,address:o,password:l},function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(jt()),e.next=4,y(r);case 4:"success"===(a=e.sent).status?t(dt(a.message)):t(bt(a.message)),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(bt(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Nom complet"}),Object(B.jsx)(E.a.Control,{type:"text",name:"name",value:n.name,onChange:O,placeholder:"Your name",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Telephone"}),Object(B.jsx)(E.a.Control,{type:"number",name:"phone",value:n.phone,onChange:O,placeholder:"Phone",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Email"}),Object(B.jsx)(E.a.Control,{type:"email",name:"email",value:n.email,onChange:O,placeholder:"Enter email",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Nom de l'entreprise"}),Object(B.jsx)(E.a.Control,{type:"text",name:"company",value:n.company,onChange:O,placeholder:"Company name",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Addresse"}),Object(B.jsx)(E.a.Control,{type:"text",name:"address",value:n.address,onChange:O,placeholder:"Full address",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Mot de passe"}),Object(B.jsx)(E.a.Control,{type:"password",name:"password",value:n.password,onChange:O,placeholder:"Password",required:!0})]}),Object(B.jsxs)(E.a.Group,{children:[Object(B.jsx)(E.a.Label,{children:"Confirmer le mot de passe"}),Object(B.jsx)(E.a.Control,{type:"password",name:"confirmPass",value:n.confirmPass,onChange:O,placeholder:"Confirm Password",required:!0})]}),Object(B.jsx)(E.a.Text,{children:!l.confirmPass&&Object(B.jsx)("div",{className:"text-danger mb-3",children:"MDP non synchronis\xe9!"})}),Object(B.jsxs)("ul",{className:"mb-4",children:[Object(B.jsx)("li",{className:l.isLenthy?"text-success":"text-danger",children:"Min 8 characters"}),Object(B.jsx)("li",{className:l.hasUpper?"text-success":"text-danger",children:"At least one upper case"}),Object(B.jsx)("li",{className:l.hasLower?"text-success":"text-danger",children:"At least one lower case"}),Object(B.jsx)("li",{className:l.hasNumber?"text-success":"text-danger",children:"At least one number"}),Object(B.jsxs)("li",{className:l.hasSpclChr?"text-success":"text-danger",children:["At least on of the special characters i.e @ # $ % &"," "]})]}),Object(B.jsx)(M.a,{variant:"primary",type:"submit",disabled:Object.values(l).includes(!1),children:"Submit"}),h&&Object(B.jsx)(F.a,{variant:"info",animation:"border"})]})})}),Object(B.jsx)(P.a,{className:"py-4",children:Object(B.jsxs)(A.a,{children:["Already have an account ",Object(B.jsx)("a",{href:"/",children:"Login Now"})]})})]})},mt=(r(235),function(){return Object(B.jsx)("div",{className:"registration-page ",children:Object(B.jsx)("div",{className:"mt-5",children:Object(B.jsx)(o.a,{className:"form-box",children:Object(B.jsx)(Ot,{})})})})}),ft=(r(236),{status:"",message:""}),gt=function(){var e=Object(N.m)(),t={_id:e._id,email:e.email},r=Object(a.useState)(ft),n=Object(i.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:r=e.sent,s(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!c.status&&e()}),[c]),Object(B.jsx)("div",{className:"registration-page",children:Object(B.jsx)("div",{className:"mt-5",children:Object(B.jsxs)(o.a,{className:"form-box",children:[!c.status&&Object(B.jsx)(F.a,{variant:"info",animation:"border"}),c.status&&Object(B.jsx)(I.a,{variant:"success"===c.status?"success":"danger",children:c.message})]})})})};var vt=function(){return Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(Ne.BrowserRouter,{children:Object(B.jsxs)(N.g,{children:[Object(B.jsx)(N.d,{exact:!0,path:"/",children:Object(B.jsx)(K,{})}),Object(B.jsx)(N.d,{exact:!0,path:"/registration",children:Object(B.jsx)(mt,{})}),Object(B.jsx)(N.d,{exact:!0,path:"/verification/:_id/:email",children:Object(B.jsx)(gt,{})}),Object(B.jsx)(it,{path:"/dashboard",children:Object(B.jsx)(Je,{})}),Object(B.jsx)(it,{path:"/add-ticket",children:Object(B.jsx)(Xe,{})}),Object(B.jsx)(it,{path:"/tickets",children:Object(B.jsx)(tt,{})}),Object(B.jsx)(N.d,{path:"/ticket/:tId",children:Object(B.jsx)(nt,{})})]})})})},kt=Object(d.a)({reducer:{tickets:me,login:G,user:m,openTicket:Ke,registration:ht}});r(237);s.a.render(Object(B.jsx)(n.a.StrictMode,{children:Object(B.jsx)(_.a,{store:kt,children:Object(B.jsx)(vt,{})})}),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.e5ab3aaa.chunk.js.map