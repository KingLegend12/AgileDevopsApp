{"ast":null,"code":"import _regeneratorRuntime from\"/Users/drissjd/Desktop/InternShipApp/internship_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/drissjd/Desktop/InternShipApp/internship_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{fetchTicketLoading,fetchTicketSuccess,fetchTicketFail,searchTickets,fetchSingleTicketLoading,fetchSingleTicketSuccess,fetchSingleTicketFail,replyTicketLoading,replyTicketSuccess,replyTicketFail,closeTicketLoading,closeTicketSuccess,closeTicketFail}from\"./ticketSlice\";import{getAllTickets,getSingleTicket,updateReplyTicket,updateTicketStatusClosed}from\"../../api/ticketApi\";export var fetchAllTickets=function fetchAllTickets(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchTicketLoading());_context.prev=1;_context.next=4;return getAllTickets();case 4:result=_context.sent;dispatch(fetchTicketSuccess(result.data.result));if(!result.data.result){dispatch(fetchTicketFail({message:\"error couldn't load\"}));}//console.log(result);\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch(fetchTicketFail(_context.t0.message));case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var filterSearchTicket=function filterSearchTicket(str){return function(dispatch){dispatch(searchTickets(str));};};export var fetchSingleTicket=function fetchSingleTicket(_id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(fetchSingleTicketLoading());_context2.prev=1;_context2.next=4;return getSingleTicket(_id);case 4:result=_context2.sent;dispatch(fetchSingleTicketSuccess(result.data.result.length&&result.data.result[0]));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(fetchSingleTicketFail(_context2.t0.message));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var replyOnTicket=function replyOnTicket(_id,msgObj){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(replyTicketLoading());_context3.prev=1;_context3.next=4;return updateReplyTicket(_id,msgObj);case 4:result=_context3.sent;console.log(result);if(!(result.status===\"error\")){_context3.next=8;break;}return _context3.abrupt(\"return\",dispatch(replyTicketFail(result.message)));case 8:dispatch(fetchSingleTicket(_id));dispatch(replyTicketSuccess(\"Message envoyée avec succes\"));_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0.message);dispatch(replyTicketFail(_context3.t0.message));case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[1,12]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var closeTicket=function closeTicket(_id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(closeTicketLoading());_context4.prev=1;_context4.next=4;return updateTicketStatusClosed(_id);case 4:result=_context4.sent;if(!(result.status===\"error\")){_context4.next=7;break;}return _context4.abrupt(\"return\",dispatch(closeTicketFail(result.message)));case 7:dispatch(fetchSingleTicket(_id));dispatch(closeTicketSuccess(\"Ce ticket est fermé\"));_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0.message);dispatch(closeTicketFail(_context4.t0.message));case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[1,11]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/drissjd/Desktop/InternShipApp/internship_frontend/src/pages/ticket-lists/ticketsAction.js"],"names":["axios","fetchTicketLoading","fetchTicketSuccess","fetchTicketFail","searchTickets","fetchSingleTicketLoading","fetchSingleTicketSuccess","fetchSingleTicketFail","replyTicketLoading","replyTicketSuccess","replyTicketFail","closeTicketLoading","closeTicketSuccess","closeTicketFail","getAllTickets","getSingleTicket","updateReplyTicket","updateTicketStatusClosed","fetchAllTickets","dispatch","result","data","message","filterSearchTicket","str","fetchSingleTicket","_id","length","replyOnTicket","msgObj","console","log","status","closeTicket"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nimport {\n  fetchTicketLoading,\n  fetchTicketSuccess,\n  fetchTicketFail,\n  searchTickets,\n  fetchSingleTicketLoading,\n  fetchSingleTicketSuccess,\n  fetchSingleTicketFail,\n  replyTicketLoading,\n  replyTicketSuccess,\n  replyTicketFail,\n  closeTicketLoading,\n  closeTicketSuccess,\n  closeTicketFail,\n} from \"./ticketSlice\";\n\nimport {\n  getAllTickets,\n  getSingleTicket,\n  updateReplyTicket,\n  updateTicketStatusClosed,\n} from \"../../api/ticketApi\";\nexport const fetchAllTickets = () => async (dispatch) => {\n  dispatch(fetchTicketLoading());\n\n  try {\n    const result = await getAllTickets();\n    dispatch(fetchTicketSuccess(result.data.result));\n    if (!result.data.result) {\n      dispatch(fetchTicketFail({ message: \"error couldn't load\" }));\n    }\n    //console.log(result);\n  } catch (error) {\n    dispatch(fetchTicketFail(error.message));\n  }\n};\n\nexport const filterSearchTicket = (str) => (dispatch) => {\n  dispatch(searchTickets(str));\n};\n\nexport const fetchSingleTicket = (_id) => async (dispatch) => {\n  dispatch(fetchSingleTicketLoading());\n  try {\n    const result = await getSingleTicket(_id);\n    dispatch(\n      fetchSingleTicketSuccess(\n        result.data.result.length && result.data.result[0]\n      )\n    );\n  } catch (error) {\n    dispatch(fetchSingleTicketFail(error.message));\n  }\n};\n\nexport const replyOnTicket = (_id, msgObj) => async (dispatch) => {\n  dispatch(replyTicketLoading());\n  try {\n    const result = await updateReplyTicket(_id, msgObj);\n    console.log(result);\n    if (result.status === \"error\") {\n      return dispatch(replyTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n\n    dispatch(replyTicketSuccess(\"Message envoyée avec succes\"));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(replyTicketFail(error.message));\n  }\n};\n\nexport const closeTicket = (_id) => async (dispatch) => {\n  dispatch(closeTicketLoading());\n  try {\n    const result = await updateTicketStatusClosed(_id);\n    if (result.status === \"error\") {\n      return dispatch(closeTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n\n    dispatch(closeTicketSuccess(\"Ce ticket est fermé\"));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(closeTicketFail(error.message));\n  }\n};\n"]},"metadata":{},"sourceType":"module"}